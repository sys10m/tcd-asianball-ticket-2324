{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useZxing}from'react-zxing';import TicketConfirmation from'../components/TicketConfirmation';import Link from'../components/Link';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ScanPage(){const[camOn,setCamOn]=useState(false);const[manualInput,setManualInput]=useState(\"\");const[currentTicket,setCurrentTicket]=useState(\"\");const[currentInfo,setCurrentInfo]=useState();const{ref}=useZxing({onDecodeResult(result){setCurrentTicket(result.getText());setCamOn(false);},paused:!camOn});const handleTextChange=event=>{setManualInput(event.target.value);};const handleSubmitBtn=()=>{setCurrentTicket(manualInput);setManualInput(\"\");setCamOn(false);};useEffect(()=>{const apiLink='http://127.0.0.1:8080/ticketinfo/';if(currentTicket){fetch(apiLink+currentTicket,{method:'GET'}).then(response=>response.json()).then(data=>setCurrentInfo(data.data));}},[currentTicket]);const clearCurrent=()=>{setCurrentTicket(\"\");setCurrentInfo();};const handleScanBtn=()=>{setCamOn(prev=>!prev);};return/*#__PURE__*/_jsxs(\"div\",{className:\"ScanPage\",children:[/*#__PURE__*/_jsx(\"div\",{children:camOn?/*#__PURE__*/_jsx(\"video\",{className:\"scanbox\",ref:ref}):/*#__PURE__*/_jsx(\"h1\",{children:\"stats\"})}),currentInfo&&/*#__PURE__*/_jsx(TicketConfirmation,{firstname:currentInfo.firstname,surname:currentInfo.surname,email:currentInfo.email,code:currentTicket,timestamp:currentInfo.timestamp,clearCurrent:clearCurrent}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"ticket-id-input\",value:manualInput,onChange:handleTextChange,type:\"text\",placeholder:\"Ticket id (e.g. 12345678901)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"themed-btn\",onClick:handleSubmitBtn,children:\"Submit\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/stats\",children:/*#__PURE__*/_jsx(\"button\",{className:\"themed-btn\",children:\"Stats\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"themed-btn\",onClick:handleScanBtn,children:camOn?\"Camera Off\":\"Scan\"})]});}","map":{"version":3,"names":["React","useState","useEffect","useZxing","TicketConfirmation","Link","jsx","_jsx","jsxs","_jsxs","ScanPage","camOn","setCamOn","manualInput","setManualInput","currentTicket","setCurrentTicket","currentInfo","setCurrentInfo","ref","onDecodeResult","result","getText","paused","handleTextChange","event","target","value","handleSubmitBtn","apiLink","fetch","method","then","response","json","data","clearCurrent","handleScanBtn","prev","className","children","firstname","surname","email","code","timestamp","onChange","type","placeholder","onClick","to"],"sources":["/Users/sys10m/Documents/projects/asianBall/check-in/ab24checkin/src/pages/ScanPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useZxing } from 'react-zxing';\nimport TicketConfirmation from '../components/TicketConfirmation';\nimport Link from '../components/Link';\n\nexport default function ScanPage(){\n    const [camOn, setCamOn] = useState(false);\n    const [manualInput, setManualInput] = useState(\"\");\n    const [currentTicket, setCurrentTicket] = useState(\"\");\n    const [currentInfo, setCurrentInfo] = useState();\n    const { ref } = useZxing({\n        onDecodeResult(result) {\n          setCurrentTicket(result.getText());\n          setCamOn(false);\n        },\n        paused: !camOn\n      });\n\n    const handleTextChange = (event) => {\n        setManualInput(event.target.value);\n    }\n    const handleSubmitBtn = () => {\n        setCurrentTicket(manualInput);\n        setManualInput(\"\");\n        setCamOn(false);\n    }\n    \n    useEffect(() => {\n        const apiLink = 'http://127.0.0.1:8080/ticketinfo/'\n        if (currentTicket){\n            fetch(apiLink + currentTicket, {\n                method: 'GET',\n            })\n                .then(response => response.json())\n                .then(data => setCurrentInfo(data.data))\n        }\n    }, [currentTicket])\n\n    const clearCurrent = () => {\n        setCurrentTicket(\"\");\n        setCurrentInfo();\n    }\n    \n    const handleScanBtn = () => {\n        setCamOn((prev) => !prev);\n    }\n\n    return (\n        <div className=\"ScanPage\">\n            <div>\n                {camOn? \n                <video className='scanbox' ref={ref} />\n                :\n                <h1>stats</h1>\n                }\n            </div>\n            {currentInfo &&\n                <TicketConfirmation firstname={currentInfo.firstname} surname={currentInfo.surname} email={currentInfo.email} code={currentTicket} timestamp={currentInfo.timestamp} clearCurrent={clearCurrent}/>\n            }\n            <div>        \n                <input className='ticket-id-input' value={manualInput} onChange={handleTextChange} type='text' placeholder='Ticket id (e.g. 12345678901)'></input>\n                <button className=\"themed-btn\" onClick={handleSubmitBtn}>Submit</button>\n            </div>\n            <Link to='/stats'>\n                <button className=\"themed-btn\">Stats</button>\n            </Link>\n            <button className=\"themed-btn\" onClick={handleScanBtn}>{camOn? \"Camera Off\": \"Scan\"}</button>\n        </div>\n    );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,aAAa,CACtC,MAAO,CAAAC,kBAAkB,KAAM,kCAAkC,CACjE,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtC,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAE,CAC9B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACzC,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACc,aAAa,CAAEC,gBAAgB,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACgB,WAAW,CAAEC,cAAc,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAChD,KAAM,CAAEkB,GAAI,CAAC,CAAGhB,QAAQ,CAAC,CACrBiB,cAAcA,CAACC,MAAM,CAAE,CACrBL,gBAAgB,CAACK,MAAM,CAACC,OAAO,CAAC,CAAC,CAAC,CAClCV,QAAQ,CAAC,KAAK,CAAC,CACjB,CAAC,CACDW,MAAM,CAAE,CAACZ,KACX,CAAC,CAAC,CAEJ,KAAM,CAAAa,gBAAgB,CAAIC,KAAK,EAAK,CAChCX,cAAc,CAACW,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACtC,CAAC,CACD,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC1BZ,gBAAgB,CAACH,WAAW,CAAC,CAC7BC,cAAc,CAAC,EAAE,CAAC,CAClBF,QAAQ,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDV,SAAS,CAAC,IAAM,CACZ,KAAM,CAAA2B,OAAO,CAAG,mCAAmC,CACnD,GAAId,aAAa,CAAC,CACde,KAAK,CAACD,OAAO,CAAGd,aAAa,CAAE,CAC3BgB,MAAM,CAAE,KACZ,CAAC,CAAC,CACGC,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAIjB,cAAc,CAACiB,IAAI,CAACA,IAAI,CAAC,CAAC,CAChD,CACJ,CAAC,CAAE,CAACpB,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAqB,YAAY,CAAGA,CAAA,GAAM,CACvBpB,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,CAAC,CACpB,CAAC,CAED,KAAM,CAAAmB,aAAa,CAAGA,CAAA,GAAM,CACxBzB,QAAQ,CAAE0B,IAAI,EAAK,CAACA,IAAI,CAAC,CAC7B,CAAC,CAED,mBACI7B,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACrBjC,IAAA,QAAAiC,QAAA,CACK7B,KAAK,cACNJ,IAAA,UAAOgC,SAAS,CAAC,SAAS,CAACpB,GAAG,CAAEA,GAAI,CAAE,CAAC,cAEvCZ,IAAA,OAAAiC,QAAA,CAAI,OAAK,CAAI,CAAC,CAEb,CAAC,CACLvB,WAAW,eACRV,IAAA,CAACH,kBAAkB,EAACqC,SAAS,CAAExB,WAAW,CAACwB,SAAU,CAACC,OAAO,CAAEzB,WAAW,CAACyB,OAAQ,CAACC,KAAK,CAAE1B,WAAW,CAAC0B,KAAM,CAACC,IAAI,CAAE7B,aAAc,CAAC8B,SAAS,CAAE5B,WAAW,CAAC4B,SAAU,CAACT,YAAY,CAAEA,YAAa,CAAC,CAAC,cAEtM3B,KAAA,QAAA+B,QAAA,eACIjC,IAAA,UAAOgC,SAAS,CAAC,iBAAiB,CAACZ,KAAK,CAAEd,WAAY,CAACiC,QAAQ,CAAEtB,gBAAiB,CAACuB,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,8BAA8B,CAAQ,CAAC,cAClJzC,IAAA,WAAQgC,SAAS,CAAC,YAAY,CAACU,OAAO,CAAErB,eAAgB,CAAAY,QAAA,CAAC,QAAM,CAAQ,CAAC,EACvE,CAAC,cACNjC,IAAA,CAACF,IAAI,EAAC6C,EAAE,CAAC,QAAQ,CAAAV,QAAA,cACbjC,IAAA,WAAQgC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,OAAK,CAAQ,CAAC,CAC3C,CAAC,cACPjC,IAAA,WAAQgC,SAAS,CAAC,YAAY,CAACU,OAAO,CAAEZ,aAAc,CAAAG,QAAA,CAAE7B,KAAK,CAAE,YAAY,CAAE,MAAM,CAAS,CAAC,EAC5F,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}